webpackJsonp([8],{BZCf:function(t,s){},SAxS:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),o=e.n(a),n={name:"teamTalk",data:function(){return{title:this.$route.query.title,msg:"",userID:"",userName:"",talkId:this.$route.query.talkId,talkList:[]}},components:{},methods:{send:function(){this.msg&&this.sendMessage(this.msg)},sendMessage:function(t){this.socket.send(o()({fromUserId:this.userID,fromTeamId:this.talkId,msg:t}));this.userID,this.talkId,this.userName;this.msg=""},conWebSocket:function(){var t=this;if(window.WebSocket){t.socket=new WebSocket("ws://192.168.124.6:9099/teamChatServer/"+this.userID);var s=t.socket;s.onopen=function(t){console.log("连接服务器成功")},s.onclose=function(t){console.log("服务器关闭")},s.onerror=function(){console.log("连接出错")},s.onmessage=function(s){if(console.log(s),s.data&&"连接成功"!=s.data){var e=JSON.parse(s.data);t.talkList.push(e),console.log(t.talkList)}}}},loadBaseData:function(){this.userID=sessionStorage.getItem("userId"),this.userName=sessionStorage.getItem("userName")},loadteam:function(){var t=this;this.$axios({method:"post",url:"/team/page",data:{}}).then(function(s){t.teamList=s.data.data})}},mounted:function(){this.loadteam(),this.loadBaseData(),this.conWebSocket()}},i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"talkWrap shadow"},[e("ul",{staticClass:"talkbox "},t._l(t.talkList,function(s,a){return e("li",{key:a,staticClass:"talkList",class:s.fromUserId==t.userID?"right":"left"},[e("div",{staticClass:"flexbox",class:s.fromUserId==t.userID?"right":"left"},[e("div",{staticClass:"name"},[t._v(t._s(s.fromName)+":")]),t._v(" "),e("span",{staticClass:"content"},[t._v(t._s(s.msg))])])])}),0),t._v(" "),e("div",{staticClass:"talkwork"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],staticClass:"rightText",attrs:{type:"text",placeholder:""},domProps:{value:t.msg},on:{input:function(s){s.target.composing||(t.msg=s.target.value)}}}),t._v(" "),e("div",{staticClass:"btn",on:{click:t.send}},[t._v("发送")])])])])},staticRenderFns:[]};var r=e("VU/8")(n,i,!1,function(t){e("BZCf")},"data-v-443a1250",null);s.default=r.exports},mvHQ:function(t,s,e){t.exports={default:e("qkKv"),__esModule:!0}},qkKv:function(t,s,e){var a=e("FeBl"),o=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}}});
//# sourceMappingURL=8.0ccf83f71496eb567dae.js.map