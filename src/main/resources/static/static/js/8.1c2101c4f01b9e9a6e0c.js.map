{"version":3,"sources":["webpack:///src/components/team/teamTalk.vue","webpack:///./src/components/team/teamTalk.vue?e74f","webpack:///./src/components/team/teamTalk.vue","webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/core-js/library/fn/json/stringify.js"],"names":["teamTalk","name","data","title","this","$route","query","msg","userID","userName","talkId","talkList","components","methods","send","sendMessage","socket","stringify_default","fromUserId","fromTeamId","message","fromName","push","conWebSocket","vm","window","WebSocket","onopen","e","console","log","onclose","onerror","onmessage","JSON","parse","loadBaseData","sessionStorage","getItem","loadteam","_this","$axios","method","url","then","res","teamList","mounted","team_teamTalk","render","_vm","_h","$createElement","_c","_self","staticClass","_l","item","i","key","class","_v","_s","directives","rawName","value","expression","attrs","type","placeholder","domProps","on","input","$event","target","composing","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports","default","__esModule","core","$JSON","stringify","it","apply","arguments"],"mappings":"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","file":"static/js/8.1c2101c4f01b9e9a6e0c.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"talkWrap shadow\">\r\n    <ul class=\"talkbox \">\r\n        <li v-for=\"(item,i) in talkList\" :key=\"i\" class=\"talkList\" :class=\"item.fromUserId == userID?'right':'left'\">\r\n            <div :class=\"item.fromUserId == userID?'right':'left'\" class=\"flexbox\">\r\n                <div class=\"name\">{{item.fromName}}:</div>\r\n                <span class=\"content\">{{item.msg}}</span>\r\n            </div>\r\n            \r\n        </li>\r\n        \r\n    </ul>\r\n    <div class=\"talkwork\">\r\n        <input class=\"rightText\"  type=\"text\"  placeholder=\"\" v-model=\"msg\">\r\n        <div class=\"btn\" @click=\"send\">发送</div>\r\n    </div>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'teamTalk',\r\n  data () {\r\n    return {\r\n      title:this.$route.query.title,\r\n      msg:'',\r\n      userID:\"\",\r\n      userName:\"\",\r\n      talkId:this.$route.query.talkId,\r\n      talkList:[]\r\n    }\r\n  },\r\n  components:{\r\n  },\r\n  methods:{\r\n    send(){\r\n      if(!this.msg){\r\n        return\r\n      }\r\n      this.sendMessage(this.msg)\r\n    },\r\n    //向服务端发送消息\r\n    sendMessage(msg){\r\n      this.socket.send(JSON.stringify({\r\n        'fromUserId': this.userID,\r\n        'fromTeamId': this.talkId,\r\n        msg: msg\r\n      }));\r\n      let message = {\r\n        fromUserId: this.userID,\r\n        fromTeamId: this.talkId,\r\n        msg: msg,\r\n        fromName:this.userName\r\n      }\r\n      this.talkList.push(message)\r\n      this.msg = '';\r\n    },\r\n    conWebSocket(){\r\n      let vm = this;\r\n      if(window.WebSocket){\r\n          //服务端websocket地址\r\n        vm.socket = new WebSocket('ws://192.168.124.6:9099/teamChatServer/'+this.userID);\r\n        let socket = vm.socket;\r\n        socket.onopen = function(e){\r\n          console.log(\"连接服务器成功\");\r\n        }\r\n        socket.onclose = function(e){\r\n          console.log(\"服务器关闭\");\r\n        }\r\n        socket.onerror = function(){\r\n          console.log(\"连接出错\");\r\n        }\r\n        // 接收服务器的消息\r\n        socket.onmessage = function(e){\r\n          console.log(e)\r\n            if(e.data && e.data !='连接成功'){\r\n                let message = JSON.parse(e.data);\r\n                vm.talkList.push(message);\r\n                console.log(vm.talkList)\r\n            }\r\n          \r\n        }   \r\n      }\r\n    },\r\n    //从local获取用户信息\r\n    loadBaseData(){\r\n      this.userID = sessionStorage.getItem(\"userId\");\r\n      this.userName = sessionStorage.getItem(\"userName\");\r\n    },\r\n    loadteam(){\r\n      let $this = this;\r\n      this.$axios({\r\n          method:'post',\r\n          url:'/team/page',\r\n          data:{}\r\n      }).then((res) =>{          //这里使用了ES6的语法\r\n          this.teamList = res.data.data\r\n      })\r\n    },\r\n   \r\n  },\r\n  mounted(){\r\n    this.loadteam()\r\n    this.loadBaseData()\r\n    this.conWebSocket()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.talkWrap{\r\n    position: relative;\r\n    width: 70%;\r\n    margin: 30px auto;\r\n    padding: 10px 30px;\r\n}\r\n.talkbox{\r\n    padding-top: 10px;\r\n    height: 400px;\r\n    border-bottom:#909090 1px solid;\r\n    margin-bottom: 10px;\r\n}\r\n.talkList{\r\n    font-size: 16px;\r\n    display: flex;\r\n    line-height: 30px;\r\n    margin: 10px 0;\r\n    color: #909090;\r\n    .flexbox{\r\n        width: 70%;\r\n        \r\n        &.right{\r\n            text-align: right;\r\n        }\r\n        &.left{\r\n            text-align: left;\r\n        }\r\n    }\r\n    &.left{\r\n        justify-content: flex-start;\r\n    }\r\n    &.right{\r\n        justify-content: flex-end;\r\n    }\r\n    .name{\r\n        width: 100%;\r\n        color: orange;\r\n        font-size: 16px;\r\n        margin-bottom: 1px;\r\n    }\r\n    .content{\r\n        display: inline-block;\r\n        border-radius: 4px;\r\n        text-align: left;\r\n        padding: 10px;\r\n        border:orange solid 1px;\r\n    }\r\n}\r\n.talkwork{\r\n    \r\n    display: flex;\r\n    font-size: 16px;\r\n    background: white;\r\n    .btn{\r\n        width: 60px;\r\n        height: 40px;\r\n        line-height: 40px;\r\n        border-radius:8px;\r\n        text-align: center;\r\n        color: orange;\r\n        border: orange solid 1px;\r\n        margin-left: 30px;\r\n    }\r\n    .rightText{\r\n        flex: 1;\r\n        border:gainsboro 1px solid;\r\n        border-radius: 4px;\r\n        height: 40px;\r\n        border-radius: 4px;\r\n        padding-left: 30px;\r\n        background: white;\r\n        opacity: .5;\r\n        font-size: 16px;\r\n  }\r\n\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/team/teamTalk.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"talkWrap shadow\"},[_c('ul',{staticClass:\"talkbox \"},_vm._l((_vm.talkList),function(item,i){return _c('li',{key:i,staticClass:\"talkList\",class:item.fromUserId == _vm.userID?'right':'left'},[_c('div',{staticClass:\"flexbox\",class:item.fromUserId == _vm.userID?'right':'left'},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.fromName)+\":\")]),_vm._v(\" \"),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(item.msg))])])])}),0),_vm._v(\" \"),_c('div',{staticClass:\"talkwork\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msg),expression:\"msg\"}],staticClass:\"rightText\",attrs:{\"type\":\"text\",\"placeholder\":\"\"},domProps:{\"value\":(_vm.msg)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.msg=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.send}},[_vm._v(\"发送\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-065c9642\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/team/teamTalk.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-065c9642\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./teamTalk.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./teamTalk.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./teamTalk.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-065c9642\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./teamTalk.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-065c9642\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/team/teamTalk.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/json/stringify.js\n// module id = mvHQ\n// module chunks = 8","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/json/stringify.js\n// module id = qkKv\n// module chunks = 8"],"sourceRoot":""}